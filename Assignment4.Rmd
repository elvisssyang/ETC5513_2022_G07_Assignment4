---
title: "Report on Happiness up to 2022"
author:
- familyname: Yang 
  othernames: Zhixiang
  email: zyan0056@student.monash.edu
  correspondingauthor: true
  qualifications:  EBS Honours Student
- familyname: Wang
  othernames: Yiqi
  email: ywan0684@studnet.monash.edu
  qualifications: Master of BA Student
- familyname: You
  othernames: Xintong
  email: xyou0004@student.monash.edu
  correspondingauthor: true
  qualifications: Master of BA Student
phone: (03) 9905 2478
department: Department of\newline Econometrics &\newline Business Statistics
organization: Group 07 ETC5513
bibliography: references.bib
biblio-style: authoryear-comp
linestretch: 1.5
output:
  monash::report:
    fig_caption: yes
    fig_height: 5
    fig_width: 8
    includes:
      in_header: preamble.tex
    keep_tex: yes
    number_sections: yes
    citation_package: biblatex
    toc: false
---


section YIQI WANG
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE,
                      eval = TRUE,
                      message = FALSE, 
                      warning = FALSE,
                      comment = NA)
```

# Load Packages

```{r}
library(tidyverse)
library(gganimate)
library(GGally)
```


# Read Data

```{r}
data2015 <- read_csv('Data/2015.csv')
data2016 <- read_csv('Data/2016.csv')
data2017 <- read_csv('Data/2017.csv')
data2018 <- read_csv('Data/2018.csv')
data2019 <- read_csv('Data/2019.csv')
data2020 <- read_csv('Data/2020.csv')
data2021 <- read_csv('Data/2021.csv')
data2022 <- read_csv('Data/2022.csv')
```

# 

```{r dataPreparation}
data2015 <- data2015 %>% 
  select(Country,Region,`Happiness Score`,
         `Economy (GDP per Capita)`,
         `Health (Life Expectancy)`,
         Freedom) %>% 
  rename('Happiness_Score' = 'Happiness Score',
         'Economy' = 'Economy (GDP per Capita)',
         'Health' = 'Health (Life Expectancy)') %>% 
  mutate(Year = 2015)

data2016 <- data2016 %>% 
  select(Country,`Happiness Score`,
         `Economy (GDP per Capita)`,
         `Health (Life Expectancy)`,
         Freedom) %>% 
  rename('Happiness_Score' = 'Happiness Score',
         'Economy' = 'Economy (GDP per Capita)',
         'Health' = 'Health (Life Expectancy)') %>% 
  mutate(Year = 2016)

data2017 <- data2017 %>% 
  select(Country,Happiness.Score,
         Economy..GDP.per.Capita.,
         Health..Life.Expectancy.,
         Freedom) %>% 
  rename('Happiness_Score' = 'Happiness.Score',
         'Economy' = 'Economy..GDP.per.Capita.',
         'Health' = 'Health..Life.Expectancy.') %>% 
  mutate(Year = 2017)

data2018 <- data2018 %>% 
  select(`Country or region`,
         Score,
         `GDP per capita`,
         `Healthy life expectancy`,
         `Freedom to make life choices`) %>%
  rename('Country' = 'Country or region',
         'Happiness_Score' = 'Score',
         'Economy' = 'GDP per capita',
         'Health' = 'Healthy life expectancy',
         'Freedom' = 'Freedom to make life choices') %>% 
  mutate(Year = 2018)

data2019 <- data2019 %>% 
  select(`Country or region`,
         Score,
         `GDP per capita`,
         `Healthy life expectancy`,
         `Freedom to make life choices`) %>%
  rename('Country' = 'Country or region',
         'Happiness_Score' = 'Score',
         'Economy' = 'GDP per capita',
         'Health' = 'Healthy life expectancy',
         'Freedom' = 'Freedom to make life choices') %>% 
  mutate(Year = 2019)

data2020 <- data2020 %>% 
  select(`Country name`,
         `Ladder score`,
         `Explained by: Log GDP per capita`,
         `Explained by: Healthy life expectancy`,
         `Freedom to make life choices`) %>%
  rename('Country' = 'Country name',
         'Happiness_Score' = 'Ladder score',
         'Economy' = 'Explained by: Log GDP per capita',
         'Health' = 'Explained by: Healthy life expectancy',
         'Freedom' = 'Freedom to make life choices') %>% 
  mutate(Year = 2020)

data2021 <- data2021 %>% 
  select(`Country name`,
         `Ladder score`,
         `Explained by: Log GDP per capita`,
         `Explained by: Healthy life expectancy`,
         `Freedom to make life choices`) %>%
  rename('Country' = 'Country name',
         'Happiness_Score' = 'Ladder score',
         'Economy' = 'Explained by: Log GDP per capita',
         'Health' = 'Explained by: Healthy life expectancy',
         'Freedom' = 'Freedom to make life choices') %>% 
  mutate(Year = 2021)

data2022 <- data2022 %>% 
  select(Country,
         `Happiness score`,
         `Explained by: GDP per capita`,
         `Explained by: Healthy life expectancy`,
         `Explained by: Freedom to make life choices`) %>%
  rename('Happiness_Score' = 'Happiness score',
         'Economy' = 'Explained by: GDP per capita',
         'Health' = 'Explained by: Healthy life expectancy',
         'Freedom' = 'Explained by: Freedom to make life choices') %>% 
  mutate(Year = 2022,
         Happiness_Score = Happiness_Score/1000,
         Economy = str_replace(Economy,',','.') %>% as.numeric(),
         Health = str_replace(Health,',','.') %>% as.numeric(),
         Freedom = str_replace(Freedom,',','.') %>% as.numeric())
```


```{r dataPreparation2}
area <- data2015 %>% 
  select(Country,Region)

data2016 <- area %>% 
  left_join(data2016,by = 'Country')

data2017 <- area %>% 
  left_join(data2017,by = 'Country')

data2018 <- area %>% 
  left_join(data2018,by = 'Country')

data2019 <- area %>% 
  left_join(data2019,by = 'Country')

data2020 <- area %>% 
  left_join(data2020,by = 'Country')

data2021 <- area %>% 
  left_join(data2021,by = 'Country')

data2022 <- area %>% 
  left_join(data2022,by = 'Country')
```

```{r data_Preparation}
data1 <- bind_rows(data2015,data2016,data2017,data2018,
                 data2019,data2020,data2021,data2022)
```


### Introduction

@helliwell2012state show with the continuous progress of human society, the happiness index has become an important standard for measuring the family, and people have also begun to study issues related to the happiness index. Since the happiness index is related to many factors of a family, it will also affect the The whole world. Therefore, this part will start with two research questions to explore the happiness index of the world.

##research questionsï¼š

1. How will happiness trends change between 2015 to 2022 in different regions?

2. From 2015 to 2022, What is the relationship between economic situation and health status with the happiness?

### The trends in happiness 2015-2022

```{r trends , fig.cap = "Change of Happiness Score in Different Region", warning = FALSE,message = F}
p1 <- data1 %>% 
  select(Year,
         Happiness_Score,
         Region) %>% 
  
  group_by(Year,
           Region) %>% 
  summarise(Happiness_Score = mean(Happiness_Score,na.rm = T)) %>% 
  
  ungroup() %>%
  
  ggplot(aes(x = Year,y = Happiness_Score,group = Region,color = Region)) +
  geom_point() +
  geom_line() +
  scale_color_brewer(palette = 'Paired') +
  labs(y = 'Happiness Score',
       title = 'Change of Happiness Score in Different Region') +
  theme_classic() +
  theme(plot.title = element_text(hjust = 0.5))
plotly::ggplotly(p1)
```
From the Figure \@ref(fig:trends), we can see that the trend in all regions can be divided into three different levels of happiness score.  In all regions , South Asia and Sub-Saharan Africa these two regions of overall happiness is the lowest, but Sub-Saharan Africa's happiness began to increase year by year after reaching the trough in 2016, and the South Asia region began in 2018, Happiness is declining year by year. The three regions with the highest overall happiness are: Australia and New Zealand; North America; and Western Europe, and the three regions have changed their happiness by little each year, with a relatively flat trend. Overall well-being is in the middle of the region, with the Central and Eastern Europe region being the only one that is rising year on year, while other regions are in a slightly fluctuating but general trend that is in a more stable state. Overall, we observed that regions with relatively better economic levels had higher happiness indices and more stable changes, while regions with poorer economies had lower happiness indices and had larger annual trends.




### the relationship between economic situation and health status with the happiness in 2015-2022


```{r VS , fig.cap = "Happiness Score vs Economy & Health", warning = FALSE,message = F}
data1 %>% 
  filter(!is.na(Year)) %>% 
  ggplot(aes(x = Economy,
             y = Health,
             color = Happiness_Score)) +
  geom_point(alpha = 0.7) +
  labs(color = 'Happiness Score',
       size = 'Happiness Score',
       title = 'Happiness Score vs Economy & Health') +
  facet_wrap(~Year,scales = 'free') +
  scale_color_viridis_c() +
  theme_classic() +
  theme(plot.title = element_text(hjust = 0.5),
        text = element_text(size = 8))
```

People's understanding of happiness is inseparable from their own living conditions, so in this report, we also studied the relationship between happiness and economic and health status.


From the figure \@ref(fig:VS), we can find that there is a positive correlation between economic status, health status and well-being from 2015 to 2022. The better the economic status and health status, the stronger the people's well-being.


From 2015 to 2022, the influence of the economic status on the happiness index is getting lower and lower, and the influence of the health on the happiness index has increased significantly. From 2017 to 2018, the influence of economic on happiness index increased slightly, while the influence of health  on happiness index decreased slightly during this period.





```{r}
tabel1 <- data1 %>% 
  split(.$Year) %>% 
  map(~coef(lm(Happiness_Score ~ Economy + Health,data = .x))) %>% 
  do.call('rbind',.) %>% 
  as.data.frame() %>% 
  mutate(Year = rownames(.)) %>% 
  mutate_if(is.numeric,round,3) %>% 
  select(Year,`(Intercept)`,Economy,Health)
```


```{r table,cache=TRUE}
table1 %>% 
  knitr::kable('latex', 
               digits = 3, 
               booktabs = TRUE, 
               caption = "A linear relationship between economic status and health status with happiness index each year")%>%
  kableExtra::kable_styling(latex_options = "striped")
```



Overall, from 2015 to 2022, the influence of economic on happiness index did not change significantly, in the table1 \ref{tab:table} shows the slope decreased from 1.616 to 1.406, only 0.2. However, the influence of health on happiness index changed a lot, and the slope increased from 1.2 to 2.08 Through these data, we can also see that in today's society, people pay more and more attention to their health, especially after the covid-19. Generally speaking, the proportion of health in people's mind is higher and higher.






